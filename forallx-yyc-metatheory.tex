%!TEX root = forallxyyc.tex
\part{Metateoria}
\label{ch.normalform}
\addtocontents{toc}{\protect\mbox{}\protect\hrulefill\par}

\chapter{Formas normais e expressividade}


\section{Forma Normal Disjuntiva}\label{s:DNFDefined}

Às vezes é útil considerar grupos restritos de sentenças com formas particularmente simples.
Por exemplo, podemos considerar o grupo restrito formado pelas sentenças atômicas e pelas sentenças que são negações de sentenças atômicas:
$$A, \enot B, A_3, \enot F_2, ...$$
As sentenças deste grupo  são comumente chamadas de \xdefine{literais}.
Podemos criar um grupo mais amplo, acrescentando aos literais sentenças que são conjunções arbitrárias de literais:
	\begin{align*}
			& A_3 \\
			& A \eand \enot B \\
			& \enot C \\
			& \enot J \eand \enot A_3 \eand  C \\
			& F_2 \eand  J \\
			& \ \ \vdots
	\end{align*}
Podemos ampliar mais um pouco este grupo e acrescentar a ele sentenças que são disjunções de literais ou de conjunções arbitrárias de literais:
	\begin{align*}
  		& A \\
  		& A \eand \lnot B \eand C\\
  		& (A \eand B) \eor (A \eand \enot B)\\
  		& (A \eand B) \eor (A \eand  B \eand C \eand \enot D \eand \enot E)\\
  		& A \eor (C \eand \enot P_{234} \eand P_{233} \eand Q) \eor \enot B\\
  		& \ \ \vdots
	\end{align*}
Dizemos que as sentenças deste grupo mais amplo estão na \define{disjunctive normal form}, cuja definição formal pode ser assim apresentada:
uma sentença está na \textit{forma normal disjuntiva} se e somente se ela satisfizer todas as seguintes condições:
	\begin{earg}
		\item[(\textsc{fnd 1})] Nenhum conectivo que não seja negação, conjunção ou disjunção ocorre na sentença;
		\item[(\textsc{fnd 2})] Qualquer negação que ocorra na sentença é a negação de uma letra sentencial;
		\item[(\textsc{fnd 3})] Qualquer conjunção que ocorra na sentença é conjunção de literais; ou seja, apenas sentenças atômicas ou negações de sentenças atômicas podem ser conjuntos das conjunções.
	\end{earg}
Um outro modo de entender o grupo de sentenças que estão na forma normal disjuntiva é definindo-o como o grupo composto pelas sentenças que pertencem a qualquer um dos seguintes 4 grupos:
\begin{earg}
		\item[\textsc{grupo 1} - letras sentenciais:] \ \\
				$B_3, A, J_7, C, P_5,...$
		\item[\textsc{grupo 2} - negações de sentenças do grupo anterior:] \ \\
				$\enot A, \enot B_9, \enot K_2, \enot J,... $
		\item[\textsc{grupo 3} - conjunção de sentenças dos grupos anteriores:] \ \\
				$(B_3 \eand C), \ (\enot S \eand A \eand \enot C_1),...$
		\item[\textsc{grupo 4} - disjunção de sentenças dos grupos anteriores:] \ \\ 
				$(A \eand B) \eor (A \eand \enot B),\ \  A \eor (C \eand \enot P_{234} \eand P_{233} \eand Q) \eor \enot B,...$
	\end{earg}
Repare que estamos \emph{temporariamente} desrespeitando a gramática da LVF aqui. 
Nos exemplos acima, empregamos conjunções e disjunções com mais de dois itens sem os necessários parênteses intermediários.
Estritamente falando, `$(A \eand B \eand C)$', por exemplo, não é uma sentença gramaticalmente correta. Ela teria que ter sido escrita ou como `$((A \eand B) \eand C)$' ou como `$(A \eand (B \eand C))$'. 
E o mesmo ocorre com as disjunções com mais de dois disjuntos.
Vamos continuar desconsiderando os parênteses intermediários em disjunções e conjunções com mais de duas partes porque isso facilita o reconhecimento das sentenças na forma normal disjuntiva e, além disso, todos os diferentes modos possíveis de preencher os parênteses nestes casos levam a sentenças logicamente equivalentes.

A seguinte notação nos ajudará a termos uma intuição visual de como são as sentenças na forma normal disjuntiva.
Escrevemos `$\pm \meta{A}$' para indicar que $\meta{A}$ é um literal, ou seja, $\meta{A}$ é uma letra sentencial ou a negação de uma letra sentencial.
Então, uma sentença na forma normal disjuntiva tem o seguinte aspecto geral:
	$$(\pm \meta{A}_1 \land \ldots \land \pm \meta{A}_i) \lor (\pm \meta{A}_{i+1} \land \ldots \land \pm\meta{A}_j) \lor \ldots \lor (\pm\meta{A}_{m+1} \land \ldots \land \pm \meta{A}_n)$$
Veja que o aspecto mais geral de uma sentença na forma normal disjuntiva é o de uma disjunção de conjunções de literais.
Mas esta é só uma intuição visual, já que qualquer sentença pertencente a  qualquer um dos quatro grupos descritos acima está na forma normal disjuntiva.

As sentenças na forma normal disjuntiva satisfazem a seguinte propriedade:
	\factoidbox{\label{thm:dnf}\textbf{Teorema da Formal Normal Disjuntiva.} Dada qualquer sentença da LVF, existe uma sentença logicamente equivalente a ela que está na forma normal disjuntiva.
	}
Daqui para a frente iremos abreviar a expressão  `forma normal disjuntiva' por `FND'. 


\section{Prova do Teorema FND}
\label{s:DNFTruthTable}

Usaremos as tabelas de verdade para construirmos uma prova do Teorema da FND.
A ideia é que dada uma sentença qualquer, podemos utilizar sua tabela de verdade como fonte para produzir uma sentença na FND com tabela de verdade idêntica e que, por isso, será logicamente equivalente à sentença original.
Vamos inicialmente ilustrar como isto é feito e, em seguida, transformar essa ilustração em uma prova rigorosa.

Considere uma sentença $\meta{S}$ e suponha que $\meta{S}$ contém três letras sentencias:  `$A$', `$B$' e `$C$'.
O nosso primeiro passo é construir uma tabela de verdade completa para $\meta{S}$.
Suponha que $\meta{S}$ seja tal que sua tabela de verdade resulte em:
\begin{center}
\begin{tabular}{c c c | c}
$A$ & $B$ & $C$ & $\meta{S}$\\
\hline
 V & V & V & V \\
 V & V & F & F \\
 V & F & V & V \\
 V & F & F & F \\
 F & V & V & F \\
 F & V & F & F \\
 F & F & V & V \\
 F & F & F & V
\end{tabular}
\end{center}
%Now, consider a sentence, whose only connectives are negations and conjunctions, where no connective occurs within the scope of any negation, e.g.:
%	$$A \eand \enot B \eand C$$
%This sentence is true when, and only when, `$A$' is true, `$B$' is false and `$C$' is true. Similarly, the sentence:
%	$$\enot A \eand \enot B \eand C$$
%this is true when, and only when, `$A$' is false, `$B$' is false and `$C$' is true. 
%
%A disjunction is true when, and only when, at least one of the disjuncts is true. So if we write down a disjunction of sentences of the above form, perhaps
%	$$(A \eand \enot B \eand C) \eor (\enot A \eand \enot B \eand C)$$
%then it will be true on exactly \emph{two} lines of the truth table which describes all possible valuations of `$A$', `$B$' and `$C$'. 
%

\noindent Note que $\meta{S}$ é verdadeira em quatro linhas da tabela de verdade: nas linhas 1, 3, 7 e 8.
Na linha 1 de nossa tabela, as três letras sentencias `$A$', `$B$' e `$C$' são verdadeiras.
Utilizamos esta informação para construir uma sentença que será verdadeira nesta linha e falsa em todas as outras.
A sentença é: 
		$$A \eand B \eand C$$
Note que uma conjunção só é verdadeira quando todos os seus conjuntos são verdadeiros.
Então esta conjunção só será verdadeira quando `$A$', `$B$' e `$C$' forem.
Ou seja, só na linha 1 da tabela de $\meta{S}$.

Fazemos a mesma coisa com as outras linhas da tabela em que $\meta{S}$ é verdadeira.
A próxima delas  é a linha 3, onde as colunas de referência indicam que `$A$' é verdadeira, `$B$' é falsa e `$C$' é verdadeira.
Utilizamos esta informação para construir uma sentença que será verdadeira nesta linha e falsa em todas as outras.
A sentença é: 
		$$A \eand \enot B \eand C$$
Novamente, repare que uma conjunção só é verdadeira quando todos os seus conjuntos são verdadeiros. Então esta conjunção só será verdadeira quando `$A$' é verdadeira, `$B$' é falsa e `$C$' é verdadeira.
Ou seja, só na linha 3 da tabela de $\meta{S}$.

Fazendo a mesma coisa com as outras linhas da tabela nas quais $\meta{S}$ é verdadeira, as linhas 7 e 8, obtemos, respectivamente, as seguintes sentenças:
\begin{center}
		$\enot A \eand \enot B \eand C$ \\
		$\enot A \eand \enot B \eand \enot C$
\end{center}
%$$\enot A \eand \enot B \eand C$$
%$$\enot A \eand \enot B \eand \enot C$$
Então, o que fizemos até aqui foi que, dada a tabela de verdade de $\meta{S}$, para cada uma das linhas em que $\meta{S}$ é verdeira, construímos uma sentença que é verdadeira nesta linha e falsa em todas as outras:
	\begin{earg}
		\item  `$A \eand B \eand C$'\hfill verdadeira apenas na linha 1
		\item `$A \eand \enot B \eand C$' \hfill verdadeira apenas na linha 3
		\item `$\enot A \eand \enot B \eand C$' \hfill verdadeira apenas na linha 7
		\item `$\enot A \eand \enot B \eand \enot C$' \hfill verdadeira apenas na linha 8
	\end{earg}
Fazendo uma disjunção destas 4 sentenças obtemos:
$$(A \eand B \eand C) \eor (A \eand \enot B \eand C) \eor (\enot A \eand \enot B \eand C) \eor (\enot A \eand \enot B \eand \enot C)$$
Repare que, devido à sua construção, esta sentença terá uma tabela de verdade idêntica à da sentença $\meta{S}$. Será verdadeira exatamente nas linhas 1, 3, 7 e 8, e falsa nas demais; exatamente como  $\meta{S}$.
Ou seja, esta sentença é logicamente equivalente a $\meta{S}$.
Repare também que esta sentença é uma disjunção de conjunções de literais. Ou seja, é uma sentença na FND.
Ela é, então, a sentença que queríamos.
Uma sentença na FND que é logicamente equivalente a $\meta{S}$.

Partimos de uma sentença qualquer e construímos uma sentença na FND logicamente equivalente à sentença original.
A estratégia que utilizamos para esta construção não depende de nenhuma característica específica de $\meta{S}$.
$\meta{S}$ é uma sentença qualquer e por isso nossa estratégia é completamente geral.
Podemos, então, utilizá-la como base para construir uma prova do teorema da forma normal disjuntiva da seguinte forma.

\subsection{Explicitando a prova do teorema da FND}
Considere  $\meta{S}$ uma sentença qualquer e $\meta{A}_1, \ldots, \meta{A}_n$ as letras sentenciais que ocorrem em $\meta{S}$.
Considere, também, a tabela de verdade de $\meta{S}$.
Para obter uma sentença na FND que seja logicamente equivalente a $\meta{S}$, há dois casos a tratar:
	\begin{enumerate}
		\item \emph{$\meta{S}$ é falsa em todas as linhas de sua tabela de verdade.} Neste caso  $\meta{S}$ é uma contradição.
		A sentença $(\meta{A}_1 \eand \enot \meta{A}_1)$ satisfaz as condições que buscamos.
		Está na FND e é logicamente equivalente a $\meta{S}$, já que também é uma contradição.
	
		\item\emph{$\meta{S}$ é verdadeira em pelo menos uma linha de sua tabela de verdade.}
		Neste caso, para cada linha $i$ da tabela de verdade de $\meta{S}$, seja $\meta{B}_i$ uma conjunção da forma
		$$(\pm\meta{A}_{1} \land \ldots \land \pm\meta{A}_{n})$$
		onde cada literal $\pm\meta{A}_{j}$ será da forma $\meta{A}_{j}$ ou $\enot\meta{A}_{j}$ conforme as seguinte regras:
			\begin{align*}
				\pm\meta{A}_{j}\text{ \ é \ }\meta{A}_{j}&\emph{ \ \ sse \ \ \ }\meta{A}_{j}\text{ é verdadeira na linha }i\\
				\pm\meta{A}_{j}\text{ \ é \ }\enot\meta{A}_{j}&\emph{ \ \ sse \ \ \ }\meta{A}_{j}\text{ é falsa na linha }i
			\end{align*}
		O objetivo destas regras é garantir que  $\meta{B_i}$ será verdadeira na (e somente na) linha $i$ da tabela de verdade de $\meta{S}$.
		
		Considere agora  $i_1$, $i_2$, \dots, $i_m$ os números das linhas da tabela verdade onde $\meta{S}$ é \emph{verdadeira} e seja $\meta{D}$ a seguinte sentença:
		$$\meta{B}_{i_1} \eor \meta{B}_{i_2} \eor \ldots \eor \meta{B}_{i_m}$$
		Como estamos considerando o caso 2, em que $\meta{S}$ é verdadeira em pelo menos uma linha de sua tabela de verdade, a sentença $\meta{D}$ está, por isso, bem definida.
		$\meta{D}$ é, em geral, uma disjunção de conjunções de literais e no caso limite, quando $\meta{S}$ é verdadeira em apenas uma linha de sua tabela, $\meta{D}$ é uma conjunção de literais.
		Seja qual for o caso, $\meta{D}$ está na FND.
		
		Além disso, a construção de $\meta{D}$ assegura também que para cada linha~$i$ da tabela de verdade:
		$\meta{S}$ é verdadeira na linha $i$ da tabela verdade \emph{se e somente se} um dos disjuntos de $\meta{D}$ (a saber, $\meta{B_i}$) é verdadeiro na, e somente na, linha $i$.
		Portanto, $\meta{S}$ e $\meta{D}$ têm a mesma tabela verdade e são, por isso, logicamente equivalentes.
	\end{enumerate}
	Esses dois casos esgotam todas as possibilidades para a tabela de $\meta{S}$ e em ambos obtivemos uma sentença na FND que é logicamente equivalente a $\meta{S}$.
	Eles garantem, portanto, que dada qualquer sentença $\meta{S}$ há uma sentença na FND que é equivalente a $\meta{S}$. E isso finaliza a nossa prova do teorema da forma normal disjuntiva.

%So we have proved the DNF Theorem. Before we say any more, though, we should immediately flag that we are hereby returning to the austere definition of a (TFL) sentence, according to which we can assume that any conjunction has exactly two conjuncts, and any disjunction has exactly two disjuncts.



\section{Forma Normal Conjuntiva}
\label{s:CNF}

Existem outras formas normais além da \emph{disjuntiva}.
Uma que merece nossa atenção é a \emph{forma normal conjuntiva} (FNC).
A definição de FNC é muito parecida à definição da FND.
Uma sentença está na FNC se e somente se ela satisfaz todas as seguintes condições:
	\begin{earg}
		\item[(\textsc{fnc 1})] Nenhum conectivo que não seja negação, conjunção ou disjunção ocorre na sentença;
		\item[(\textsc{fnc 2})] Qualquer negação que ocorra na sentença é negação de uma letra sentencial;
		\item[(\textsc{fnc 3})] Qualquer disjunção que ocorra na sentença tem literais como disjuntos; ou seja, apenas sentenças atômicas ou negações de sentenças atômicas podem ser disjuntos das disjunções.
	\end{earg}

\noindent A definição da FNC é, portanto, absolutamente análoga à definição da FND, com a única diferença de que as conjunções e as disjunções trocaram de papel.
Ou seja, enquanto a forma geral das sentenças na FND é a de uma \textit{disjunção de conjunções} de literais, o aspecto mais geral de uma sentença na FNC será o de uma \textit{conjunção de disjunções} de literais:
$$(\pm \meta{A}_1 \lor \ldots \lor \pm \meta{A}_i) \land (\pm \meta{A}_{i+1} \lor \ldots \lor \pm\meta{A}_j) \land \ldots \land (\pm\meta{A}_{m+1} \lor\ldots \lor \pm \meta{A}_n)$$
lembrando que a notação $\pm\meta{A}_k$ indica que $\meta{A}_k$ é um literal, ou seja, uma letra sentencial ou a negação de uma letra sentencial.

Podemos agora propor e provar outro teorema sobre forma normal:
	\factoidbox{\label{thm:cnf}\textbf{Teorema da Forma Normal Conjuntiva.} Dada qualquer sentença da LVF, existe uma sentença logicamente equivalente a ela que está na forma normal conjuntiva.}

Seja $\meta{S}$ uma sentença LVF.
	\begin{itemize}
       	\item Começamos escrevendo a tabela verdade completa para $\meta{S}$.
       	\item Se $\meta{S}$ é \emph{verdadeira} em todas as linhas da tabela verdade, então $(\meta{A}_1 \eor \enot \meta{A}_1)$ satisfaz o teorema, já que está na FNC e é logicamente equivalente a $\meta{S}$.
       	\item Se $\meta{S}$ é \emph{falsa} em pelo menos uma linha da sua tabela de verdade, então, para cada linha onde $\meta{S}$ é falsa, escreva uma disjunção $(\pm\meta{A}_1 \eor \ldots \eor \pm\meta{A}_n)$ que seja \emph{falsa} nesta linha (e verdadeira em todas as outras).\footnote{
       	Quais devem ser as regras para a construção desta sentença? Tente descobrir. O que queremos aqui é o inverso do que fizemos na prova do teorema da FND.
       	Lá queríamos uma sentença verdadeira na linha especificada e falsa em todas as outras, que fosse uma conjunção de literais.
       	Aqui queremos uma sentença que é uma disjunção de literais, e que seja falsa na linha especificada e verdadeira em todas as outras.}
       	\item Considere $\meta{C}$ a conjunção de todas essas disjunções.
       	A construção de $\meta{C}$ garante que ela está na FNC e que sua tabela de verdade é idêntica à de $\meta{S}$, e que, por isso, $\meta{C}$ e $\meta{S}$ são logicamente equivalentes.
	\end{itemize}
       
 
\practiceproblems
\problempart
\label{pr.DNF}
Para cada uma das 6 sentenças abaixo apresente duas outras sentenças logicamente equivalentes à sentença original.
Uma delas na FND e outra na FNC.
	\begin{earg}
		\item $(A \eif \enot B)$
		\item $\enot (A \eiff B)$
		\item $(\enot A \eor \enot (A \eand B))$
		\item $(\enot (A \eif B ) \eand (A \eif C))$
		\item $(\enot (A \eor B) \eiff ((\enot C \eand \enot A) \eif \enot B))$
		\item $((\enot (A \eand \enot B) \eif C) \eand \enot (A \eand D))$
	\end{earg}

        
\section{Adequação Expressiva da LVF}  

Dos conectivos da LVF, a negação, `$\enot$', é um conectivo de um lugar (unário), ou seja, liga-se a uma única sentença, e todos os outros são conectivos de dois lugares (binários) que ligam-se a exatamente duas sentenças.
Mas nós podemos cogitar sobre conectivos de \textit{n} lugares (\textit{n}-ários), que ligam-se a $n$ sentenças.
Por exemplo, poderíamos propor um conectivo de três lugares, cujo símbolo poderia ser um coração, `$\heartsuit$', e estipular que ele tem a seguinte tabela de verdade característica:
\begin{center}
\begin{tabular}{c c c | c}
$A$ & $B$ & $C$ & $\heartsuit(A,B,C)$\\
\hline
 V & V & V & F \\
 V & V & F & V \\
 V & F & V & V \\
 V & F & F & F \\
 F & V & V & F \\
 F & V & F & V \\
 F & F & V & F \\
 F & F & F & F
\end{tabular}
\end{center}
Um tal conectivo, provavelmente, não corresponde nem aproximadamente a nenhuma expressão do português. Pelo menos não do jeito que `$\eand$' corresponde a `e', por exemplo.
Mas independentemente disso, há uma questão interessante a ser feita aqui. Suponha que nós queremos construir uma sentença que diz exatamente o que `$\heartsuit(A,B,C)$' diz.
Ou seja, suponha que queremos construir uma sentença tautologicamente equivalente a `$\heartsuit(A,B,C)$', cuja tabela é idêntica à tabela de `$\heartsuit(A,B,C)$'.
Será que para fazer isso nós precisamos adicionar à LVF o conectivo  `$\heartsuit$' e sua tabela característica?
Ou será que para dizer o que `$\heartsuit(A,B,C)$' diz, os conectivos que \emph{já existem} na LVF bastam?

Vamos refazer esta pergunta de um modo mais geral e preciso.
Antes disso, aqui vai um pouco de vocabulário.
Chamaremos um conjunto de conectivos de \define{expressivamente adequado} se e somente se as sentenças construídas apenas com estes conectivos são capazes de nos dar todas as tabelas de verdade possíveis.
Dito de outro modo, um conjunto de conectivos é \emph{expressivamente adequado} se e somente se dada qualquer tabela de verdade, existe alguma sentença com todos os seus conectivos pertencentes a este grupo e que tem exatamente esta tabela de verdade.

O ponto geral aqui é que quando um conjunto de conectivos é expressivamente adequado, podemos, com ele, construir sentenças que nos dão qualquer tabela de verdade.
Todas as tabelas de verdade são alcançáveis através de um conjunto de conectivos expressivamente adequado.
Então, o modo mais geral e preciso da pergunta feita acima é: será que o conjunto total de conectivos da LVF, $\{\enot, \eand, \eor, \eif, \eiff\}$, é expressivamente adequado?
	\factoidbox{\label{thm:ExpressiveAdequacy}\textbf{Teorema da Adequação Expressiva.}
O conjunto dos conectivos da LVF é expressivamente adequado.
Na verdade, cada um dos seguintes pares é um conjunto expressivamente adequado de conectivos:
\begin{earg}
\item\label{expressive:eor} `$\enot$' e `$\eor$'
\item\label{expressive:eand} `$\enot$' e `$\eand$'
\item\label{expressive:eif} `$\enot$' e `$\eif$'
\end{earg}}

Dada qualquer tabela verdade, podemos usar o método empregado na prova do Teorema FND para obter uma sentença com os conectivos tradicionais da LVF cuja tabela de verdade é idêntica a esta dada.
Por exemplo, aplicando aquele método à tabela de `$\heartsuit(A, B, C)$' apresentada acima,  obtemos a seguinte sentença que tem exatamente a mesma tabela de verdade:
		$$(A \eand B \eand \enot C) \eor (A \eand \enot B \eand C) \eor (\enot A \eand B \eand \enot C)$$			
Ou seja, o método empregado na prova do Teorema da FND nos garante que $\{\enot, \eand, \eor \}$ é um conjunto expressivamente adequado de conectivos, porque conseguimos produzir qualquer tabela de verdade com eles.
Então é claro que o conjunto de todos os conectivos da LVF, que contém $\{\enot, \eand, \eor \}$, também é expressivamente adequado.
Vamos agora provar alguns resultados subsidiários.

\subsubsection{Resultado subsidiário \ref{expressive:eor}: adequação expressiva de `$\enot$' e `$\eor$'}	
Observe que as sentenças que construímos através do método de prova do Teorema da FND sempre vão conter apenas os conectivos `$\enot$', `$\eand$' e `$\eor$'.
Portanto, para demonstrar este resultado subsidiário é suficiente mostrar que dada qualquer sentença cujos conectivos sejam `$\enot$', `$\eand$' e `$\eor$', existe uma sentença tautologicamente equivalente na qual ocorrem apenas os conectivos `$\enot$' e `$\eor$'.
E para mostrar isso, basta mostrar que
		\begin{align*}
		(\meta{A} \eand \meta{B}) & \text{\quad \ e \quad} \enot(\enot \meta{A} \eor\enot \meta{B})
		\end{align*}
		são logicamente equivalentes.\footnote{
			Considere, por exemplo, uma sentença com os três tipos de conectivos, tal como $((\enot A \eand B) \eor \enot C)$.
			É fácil ver como a aplicação desta equivalência transforma esta sentença em uma que contém apenas disjunção e negação:
			$$((\enot A \eand B) \eor \enot C) \ \ \iff \ \ (\enot(\enot\enot A \eor\enot B) \eor \enot C)$$
			a sentença da direita é equivalente à da esquerda e só emprega `$\enot$' e `$\eor$'.}

\subsubsection{Resultado subsidiário \ref{expressive:eand}: adequação expressiva de `$\enot$' e `$\eand$'}
Exatamente como no caso anterior, como já provamos que $\{ \enot, \eand, \eor\}$ é expressivamente adequado, a equivalência 
		\begin{align*}
		(\meta{A} \eor \meta{B}) & \text{\quad \ e \quad}\enot(\enot \meta{A} \eand\enot \meta{B})
		\end{align*}
é suficiente para mostrar que $\{ \enot, \eand\}$ também é, uma vez que nos dá um método para substituir disjunções por conjunções combinadas com negações.

\subsubsection{Resultado subsidiário \ref{expressive:eif}: adequação expressiva de `$\enot$' e `$\eif$'}
%\emph{Subsidiary Result \ref{expressive:eif}: expressive adequacy of `$\enot$' and `$\eif$'.}
Aqui também, como no caso dos resultados subsidiários anteriores, estas duas equivalências 
		\begin{align*}
		(\meta{A} \eor \meta{B}) &\text{\quad \ e \quad} (\enot \meta{A} \eif \meta{B})\\
		(\meta{A} \eand \meta{B}) &\text{\quad \ e \quad} \enot(\meta{A} \eif \enot\meta{B})
		\end{align*}
são suficientes para demonstrar que $\{ \enot, \eif\}$ é expressivamente adequado, pois nos dão um método para transformar sentenças na FND em sentenças que contenham apenas a negação e o condicional como conectivos.

Em resumo, não há qualquer \emph{necessidade} de adicionar novos conectivos à LVF.
Estes resultados nos mostram, inclusive, que já existe alguma redundância entre os conectivos que temos: poderíamos ter nos contentado com apenas dois conectivos, se quiséssemos ser realmente austeros.


\section{Adequação expressiva com um único conectivo}

Há alguns conectivos de dois lugares que são expressivamente adequados \emph{individualmente}; ou seja, podemos obter todas as tabelas de verdade com sentenças em que ocorrem apenas conectivos de um destes tipos.
Eles não são incluídos nas apresentações típicas da LVF porque eles tornam as tabelas e as simbolizações das sentenças em português mais complicadas.
Mas a sua existência mostra que, se quiséssemos, poderíamos ter definido a linguagem da LVF com apenas um conectivo e, mesmo assim, ela seria expressivamente adequada.

Veremos dois destes conectivos.
O primeiro deles, simbolizado por `$\uparrow$', tem a seguinte tabela verdade característica. 
\begin{center}
\begin{tabular}{c c | c}
$\meta{A}$ & $\meta{B}$ & $\meta{A} \mathrel{\uparrow} \meta{B}$\\
\hline
 V & V & F \\
 V & F & V \\
 F & V & V  \\
 F & F & V
\end{tabular}
\end{center}

 Este conectivo costuma ser chamado de `o traço de Sheffer'\footnote{ em inglês: `\emph{the Sheffer stroke}'.}, em homenagem a Henry Sheffer, que o propôs e usou para mostrar como reduzir o número de conectivos lógicos da versão da LVF introduzida por Russell e Whitehead na famosa obra  \emph{Principia Mathematica}.\footnote{
 Confira Sheffer, `A Set of Five Independent Postulates for Boolean Algebras, with application to logical constants' (1913, \emph{Transactions of the American Mathematical Society} 14.4)}
 (Na verdade, Charles Sanders Peirce antecipou Sheffer em cerca de 30 anos, mas nunca publicou seus resultados.)\footnote{
 Veja Peirce, `A Boolean Algebra with One Constant', que data de 1880. Veja também, de Peirce, os seus  \emph{Collected Papers}, 4. 264--5.}
 É bastante comum, também, chamar este conectivo de `\emph{nand}', já que sua tabela característica é equivalente à tabela da negação da conjunção (em inglês: \emph{not} $+$ \emph{and} $=$ \emph{nand}).
\factoidbox{O conectivo \label{prop:upexpressive}`$\uparrow$' é, sozinho, expressivamente adequado.}



O Teorema da Adequação Expressiva garante que o conjunto $\{\enot, \eor\}$ é expressivamente adequado.
Portanto, é suficiente mostrar que, dada qualquer sentença que contém apenas esses dois conectivos, podemos reescrevê-la como uma sentença logicamente equivalente que contém apenas o `$\uparrow$'.
Assim como fizemos na prova dos casos subsidiários do Teorema da Adequação Expressiva, aqui também basta aplicamos as seguintes equivalências
		\begin{align*}
			\enot \meta{A} &\text{\quad \ e \quad} (\meta{A} \uparrow \meta{A})\\
			(\meta{A} \eor \meta{B}) & \text{\quad \ e \quad} ((\meta{A} \uparrow \meta{A}) \uparrow (\meta{B} \uparrow \meta{B}))
		\end{align*}
ao Resultado Subsidiário~\ref{expressive:eor}.\footnote{Como exercício, use a tabela característica da `$\uparrow$' acima para verificar que estas sentenças são mesmo logicamente equivalentes.}

Da mesma forma, podemos considerar o conectivo `$\downarrow$', cuja tabela característica é:
\begin{center}
\begin{tabular}{c c | c}
$\meta{A}$ & $\meta{B}$ & $\meta{A} \mathrel{\downarrow} \meta{B}$\\
\hline
 V & V & F \\
 V & F & F  \\
 F & V & F  \\
 F & F & V
\end{tabular}
\end{center}
Este conectivo é algumas vezes chamado de `seta de Peirce' (apesar de o próprio Peirce o ter batizado de `\emph{ampheck}').
Seu nome mais comum, no entanto, é `\emph{nor}', porque sua tabela de verdade característica é a negação da disjunção (\emph{not} $+$ \emph{or} $=$ \emph{nor}).
	\factoidbox{O conectivo `$\downarrow$' é, sozinho, expressivamente adequado.}

Analogamente ao resultado anterior para o `$\uparrow$', as equivalências
		\begin{align*}
			\enot \meta{A} &\text{\quad \ e \quad} (\meta{A} \downarrow \meta{A})\\
			(\meta{A} \eand \meta{B}) & \text{\quad \ e \quad} ((\meta{A} \downarrow \meta{A}) \downarrow (\meta{B} \downarrow \meta{B}))
		\end{align*}
aplicadas ao Resultado Subsidiário~\ref{expressive:eand} são suficientes para demonstrar a adequação expressiva de $\downarrow$.


\section{Identificando a inadequação expressiva}

De fato, os \emph{únicos} conectivos binários que são expressivamente adequados individualmente são `$\uparrow$' e `$\downarrow$'.
Mas como podemos demonstrar isso?
Ou ainda, como podemos mostrar que um certo conjunto de conectivos \emph{não é} expressivamente adequado?
 
O modo mais direto de fazer isso é tentar encontrar alguma tabela de verdade \emph{impossível} de ser expressa usando apenas os conectivos do conjunto dado.
Mas essa não é uma tarefa mecânica.
Ela envolve um pouco de arte.

Vejamos um exemplo concreto.
Será que o conjunto unitário $\{\eor\}$ é expressivamente adequado?
Um pouco de reflexão nos convencerá de que a resposta é não.
Não parece possível construir uma sentença que tenha apenas disjunções e cuja tabela de verdade seja idêntica à tabela característica da negação.
				\begin{center}
				\begin{tabular}{c | c}
				$\meta{A}$ & $\enot \meta{A}$\\
				\hline
				 V & F \\
				 F & V
				\end{tabular}
				\end{center}
A razão intuitiva deste fato é simples: o valor da primeira linha da tabela de verdade da negação é o  Falso, mas o valor da primeira linha da tabela de qualquer sentença que tenha \emph{apenas} disjunções ($\eor$) sempre será o Verdadeiro.
A negação leva o Verdadeiro no Falso, mas nenhuma combinação de disjunções fará isso.
As disjunções sempre levam o Verdadeiro no Verdadeiro.
O mesmo raciocínio vale para a conjunção, o condicional e o bicondicional.
 	\factoidbox{Nenhum dos conectivos `$\eor$', `$\eand$', `$\eif$', e `$\eiff$' é expressivamente adequado isoladamente.}

De fato, a seguinte afirmação é verdadeira:        
        
\factoidbox{Os \emph{únicos} conectivos binários que são expressivamente adequados isoladamente são `$\uparrow$' e `$\downarrow$'. }        

Isso, no entanto, é mais difícil de provar do que a inadequação expressiva dos conectivos primitivos tomados isoladamente.
Por exemplo, o conectivo ``ou exclusivo'' não tem um V na primeira linha de sua tabela de verdade característica e, portanto, o método usado acima não funciona para mostrar que ele não pode expressar todas as tabelas de verdade.
Também é mais difícil mostrar, por exemplo, que  $\{\eiff, \enot\}$ não é um conjunto expressivamente adequado.


\chapter{Correção}\label{ch:Soundness}

Neste capítulo vamos relacionar os dois aspectos distintos nos quais estudamos a LVF: a sua \textit{semântica}, dada pelas tabelas de verdade (estudadas  na Parte~\ref{ch.TruthTables}), e o seu \emph{sistema formal}, dado pelo sistema de dedução natural (apresentado na Parte~\ref {ch.NDTFL}).
Nós vamos comprovar que o sistema formal da LVF é \textit{correto}: através dele só conseguimos provar formalmente a validade de argumentos que são de fato válidos quando analisados via tabelas de verdade.
Intuitivamente, um sistema formal é correto quando é impossível, através dele, provar quaisquer argumentos inválidos.
Obviamente esta é uma propriedade altamente desejável.
Ela nos diz, quando satisfeita, que o sistema formal de provas nunca nos levará ao erro.
Na verdade, se o nosso sistema formal não fosse correto, nós não poderíamos confiar nas provas feitas através dele.
O objetivo deste capítulo é provar que o sistema formal de provas da LVF apresentado na Parte~\ref {ch.NDTFL} é correto.

Vamos tornar essa ideia mais precisa.
Em primeiro lugar, um pouco de notação.
\begin{itemize}
	\item Nós vamos usar a letra maiúscula grega $\Gamma$ (gama) como abreviação para uma lista qualquer de sentenças $\meta{A}_1, \meta{A}_2, \ldots, \meta{A}_n$.
	\item Vamos também nos lembrar que o símbolo `$\entails$' indica \textit{sustentação}. Ou seja, $\Gamma \entails \meta{C}$ denota que as sentenças de $\Gamma$ sustentam $\meta{C}$ e, por isso, o argumento $\Gamma \therefore \meta{C}$ é válido.\footnote{
		Dito de um modo ainda mais detalhado, `$\Gamma \entails \meta{C}$' denota que qualquer valoração (linha de tabela de verdade) na qual todas as sentenças de $\Gamma$ são verdadeiras também torna $\meta{C}$ verdadeira.}
	\item Por fim, vamos nos lembrar que símbolo `$\proves$' indica a existência de uma \textit{prova} formal. Ou seja, $\Gamma \proves \meta{C}$ denota que há uma prova que termina com $\meta{C}$ cujas suposições não descartadas estão todas entre as sentenças de $\Gamma$.	
\end{itemize}
Dizemos, então, que um sistema formal de provas é \define{soundness} (com relação a uma dada semântica) \emph{se e somente se}, sempre que houver uma prova formal de $\meta{C}$ cujas suposições não descartadas estão todas em $\Gamma$, então $\Gamma$ sustenta $\meta{C}$ (na semântica considerada). 
Usando as notações de metalinguagem que acabamos de relembrar, podemos dizer, então, que provar que o sistema formal da LVF é correto equivale a provar o seguinte teorema:

\begin{factoidboxe}\textbf
	{Teorema da Correção.} Para quaisquer sentenças $\Gamma$ e $\meta{C}$: se $\Gamma\proves\meta{C}$, então $\Gamma \entails\meta{C}$.
\end{factoidboxe}

Para provar este teorema usaremos a seguinte ideia geral:
verificaremos individualmente cada uma das regras do sistema formal da LVF e mostraremos que nenhuma aplicação dessas regras nos leva ao erro.
Como uma prova envolve apenas repetidas aplicações destas regras, esta verificação será suficiente para mostrar que nenhuma prova jamais nos levará ao erro.

%====== versão modificada em 04-04-2021 ======%
Em primeiro lugar, precisamos tornar mais precisa essa ideia de ``levar ao erro''.
Vamos chamar uma linha de uma prova de \xdefine{inocente} se a sentença desta linha é \textit{sustentada} pelas suposições das quais esta linha \textit{depende}.

Lembremos que uma linha depende de todas as suposições ainda não descartadas em linhas anteriores da prova.
Considere, por exemplo, que $\meta{S}_1, \ldots, \meta{S}_k$ sejam todas as suposições ainda não descartadas por linhas anteriores à linha $n$ em uma prova, e que $\meta{A}_n$ seja a sentença da linha $n$.
Dizer que a linha $n$ é inocente, ou seja, que ela é sustentada pelas suposições das quais ela depende, equivale a afirmar que $\meta{S}_1, \ldots, \meta{S}_k \entails \meta{A}_n$.

Vale a pena, também, notar que uma suposição sempre depende dela mesma e, por isso, como toda sentença sustenta a si mesma (para qualquer $\meta{A}$ e $\Gamma$, vale $\Gamma, \meta{A} \entails \meta{A}$), a linha de qualquer suposição em qualquer prova sempre é uma linha inocente.

Para ilustrar essa ideia de inocência das linhas, considere a seguinte prova:
% XXX: trecho comentado abandonado? <29-05-21, hbenevides> %
%======  04-04-2021 ======%
%====== versão até 04-04-2021 ======% 
%Em primeiro lugar, precisamos tornar mais precisa essa idéia de ``levar ao erro''.
%Vamos chamar uma linha de uma prova de \define{inocente} se a sentença desta linha é \textit{sustentada} pelas suposições das quais esta linha \textit{depende}.\footnote{
%	Lembremos que uma linha depende de todas as suposições ainda não descartadas em linhas anteriores da prova.
%	Considere, por exemplo, que $\meta{S}_1, \ldots, \meta{S}_k$ sejam todas as suposições ainda não descartadas por linhas anteriores à linha $n$ em uma prova, e que $\meta{A}_n$ seja a sentença da linha $n$.
%	Então dizer que a linha $n$ é inocente, ou seja, que ela é sustentada pelas pelas suposições das quais ela depende, equivale a afirmar que $\meta{S}_1, \ldots, \meta{S}_k \entails \meta{A}_n$.
%	Vale a pena, também, notar que uma suposição sempre depende dela mesma e, por isso, como toda sentença sustenta a si mesma (para qualquer $\meta{A}$ e $\Gamma$, vale $\Gamma, \meta{A} \entails \meta{A}$), a linha de qualquer suposição em qualquer prova é uma linha inocente.}
%Para ilustrar essa ideia, considere a seguinte prova:
	\begin{proof}
		\hypo{fgh}{F\eif(G\eand H)}
		\open
			\hypo{f}{F}
			\have{gh}{G \eand H}\ce{fgh,f}
			\have{g}{G}\ae{gh}
		\close
		\have{fg}{F \eif G}\ci{f-g}
	\end{proof}\noindent\noindent
Como as linhas $1$ e $2$ são suposições, cada uma delas depende de si e são, como vimos, inocentes, uma vez que
	$$F \eif (G \eand H) \ \entails \ F \eif (G \eand H)$$
	$$F \eif (G \eand H), \ F \ \entails \ F$$ 
As linhas $3$ e $4$, por sua vez, serão inocentes se elas forem sustentadas pelas suposições não descartadas neste setor da prova.
Ou seja, as linhas $3$ e $4$ serão inocentes, respectivamente, se
	$$F \eif (G \eand H), \ F \ \entails \ G \eand F$$
	$$F \eif (G \eand H), \ F \ \entails \ G$$
Não é difícil verificar que isso de fato se dá nos dois casos.
Com relação à linha $5$, repare que ela depende apenas da suposição da linha $1$, uma vez que a suposição da linha $2$ foi descartada na passagem da linha $4$ para a $5$, quando sua subprova foi finalizada.
Então a linha $5$ será inocente se
	$$F \eif (G \eand H) \entails F \eif G$$
o que, novamente, não é difícil de verificar em uma tabela de verdade.
O que nós queremos mostrar é que não é por mera coincidência que todas as linhas desta prova são inocentes.
	\begin{factoidboxe}\textbf{Lema da Inocência.}
		Todas as linhas de qualquer prova formal da LVF são inocentes.
	\end{factoidboxe}\noindent
Se todas as linhas de todas as provas que podem ser feitas na LVF são inocentes, então nós podemos confiar que as provas nunca vão nos desviar do caminho e nos levar ao erro.
De fato, é bem simples provar o Teorema da Correção quando assumimos como suposição que o Lema da Inocência vale.

\emph{Prova do Teorema da Correção}. Suponha que $\Gamma \proves \meta{C}$. Então, há uma prova na LVF cuja sentença da última linha é $\meta{C}$ e cujas suposições não descartadas estão todas entre as sentenças de $\Gamma$.
O Lema da Inocência nos garante que cada linha desta prova é inocente.
Em particular, a última linha desta prova é inocente, ou seja, é consequência tautológica das suposições não descartadas e, portanto, $\Gamma \entails \meta{C}$.
Veja que partimos de $\Gamma \proves \meta{C}$ e chegamos em $\Gamma \entails \meta{C}$, o que demonstra o Teorema da Correção.$\blacklozenge$\footnote{
	Uma prática comum em livros de matemática e lógica é indicar o fim das demonstrações (provas) com alguma marca. Vamos, neste capítulo, nos exercitar nesta prática, usando o símbolo `$\blacklozenge$' para fazer este papel.}

Resta agora provar o Lema da Inocência.
Para fazer isso começamos observando que cada linha de qualquer prova da LVF ou é uma suposição, ou é obtida aplicando-se alguma regra.
Como todas as suposições são por definição inocentes, o que precisamos mostrar é que nenhuma aplicação de qualquer regra de inferência nos levará ao erro.
Para tornar essa ideia mais precisa, vamos definir mais uma noção, a de \xdefine{regra confiavel}.
Dada uma prova qualquer da LVF e uma aplicação de regra qualquer (digamos que a linha $n$ de uma prova contém a sentença $\meta{A}$ obtida pela aplicação de uma regra qualquer G)
		   \begin{proof}
			   \have[\vdots]{ab}{\ \vdots}
			   \have[n]{a}{\meta{\ A} \ \ \ \textit{regra G}}
			   \have[\vdots]{ab}{\ \vdots}
		   \end{proof}	   
nós dizemos que a regra G é uma \emph{regra confiável} se e somente se em qualquer uso desta regra, em qualquer prova, se todas as linhas da prova anteriores à linha $n$ são inocentes, então a linha $n$ também é inocente.

Então, intuitivamente, uma regra é confiável quando sempre que ela é aplicada em uma prova com todas as linhas anteriores inocentes, a linha resultante de sua aplicação também será inocente.
O que nós queremos é mostrar que \emph{todas} as regras do sistema formal da LVF são regras confiáveis.
Antes de fazer isso, vejamos como a prova do Lema da Inocência fica simples quando assumimos que todas as regras de inferência da LVF são confiáveis.
	
	
\emph{Prova do Lema da Inocência}
\begin{itemize}
	\item A primeira linha de qualquer prova é sempre uma suposição e, conforme já notamos, toda suposição é inocente. Portanto a primeira linha de qualquer prova é inocente.
	\item E a segunda linha de uma prova qualquer? Ou ela é uma suposição ou foi obtida através da aplicação de uma regra de inferência.
		\begin{itemize} 
			\item Se a $2$ª linha for uma suposição, ela também será inocente.
			\item Se a $2$ª linha for obtida pela aplicação de uma regra, como estamos assumindo que todas as regras são confiáveis, e já vimos que a $1$ª linha é inocente, então a segunda linha também será inocente.
			\item Ou seja, todas as linhas de todas as provas de duas linhas são inocentes.
		\end{itemize}
	\item Até aqui mostramos que qualquer prova de uma linha tem sua linha inocente, e qualquer prova de duas linhas tem as suas duas linhas inocentes.
	\item Mas e as provas de $3$ linhas? O caso é idêntico ao das provas de $2$ linhas. Ou a $3$ª linha é uma suposição ou foi obtida através da aplicação de uma regra de inferência.
		\begin{itemize} 
			\item Se a $3$ª linha for uma suposição, ela também será inocente.
			\item Se a $3$ª linha for obtida pela aplicação de uma regra, como estamos assumindo que todas as regras são confiáveis, e já vimos que todas as linhas de todas as provas de $2$ linhas são inocentes, então a terceira linha também será inocente.
			\item Ou seja, todas as linhas de todas as provas de três linhas são inocentes.
		\end{itemize}
	\item Bem, acho que você já pegou o espírito da coisa. A mesma situação vai acontecer com as provas de $4$ linhas, com as de $5$ linhas,... e com as de $n$ linhas, para qualquer número finito $n$ de linhas. Ou seja, todas as linhas de todas as provas da LVF são inocentes, o que demonstra o Lema da Inocência.$\blacklozenge$\footnote{
		Esta prova do Lema da Inocência poderia ser apresentada de modo mais preciso e conciso se explicitássemos o uso que fazemos do \textit{princípio da indução finita} (PIF). O PIF fornece um poderoso método de prova muito empregado nas demonstrações de resultados metateóricos sobre a lógica. Optamos por ocultar a referência explícita ao PIF nesta prova por razões de economia didática. Nós mencionamos este princípio anteriormente no \textit{Capítulo \ref{sec:soundness_and_completeness} - Correção e Completude}, quando falamos ali de \textit{provas indutivas}. Vale apena rever.}
\end{itemize}

O único passo que ainda falta para completarmos de vez a prova do Teorema da Correção é provar que todas as regras de inferência da LVF são mesmo confiáveis.
Apesar de não ser especialmente difícil, esta é uma prova longa, já que a LVF tem muitas regras de inferência e precisaremos verificar a confiabilidade de cada regra individualmente.
Para encurtar um pouco as coisas, vamos introduzir mais algumas notações convenientes:
\begin{itemize}
	\item `$\Delta_i$' abreviará a lista das suposições (se houver) das quais a linha $i$ da prova analisada depende.
	\item `$\meta{S}_i$' denotará de modo genérico a sentença da linha $i$ da prova analisada.
	\item Com estas duas notações, podemos fazer a seguinte abreviação:
		\begin{center}
			`a linha $i$ é inocente' \ \ \ \ \ \textit{abrevia-se por} \ \ \ \ \ `$\Delta_i \entails \meta{S}_i$'
		\end{center}
\end{itemize}

Bem, nós queremos demonstrar que todas as regras da LVF são confiáveis, ou seja, queremos demonstrar que a sentença resultante da aplicação de qualquer regra em uma linha $n$ qualquer de uma prova será uma sentença inocente sempre que todas as sentenças das linhas $i$, com $i<n$, nesta prova, também forem todas inocentes.
Com as notações recém introduzidas podemos denotar genericamente isso que queremos demonstrar como:
\begin{center}
	Se  \ ({para todo}  $i<n$, $\Delta_i \entails \meta{S}_i$) \ \ então \ \ $\Delta_n \entails \meta{S}_n$
\end{center}

Aqui vale a pena sermos bem minuciosos.
Repare que esta notação está fazendo uma afirmação condicional.
Seu antecedente (para todo  $i<n$, $\Delta_i \entails \meta{S}_i$) equivale à afirmação de que todas as linhas anteriores à linha $n$ são inocentes, e seu consequente ($\Delta_n \entails \meta{S}_n$) equivale à afirmação de que a linha $n$ é inocente.
Ou seja, a notação  `se  \ ({para todo}  $i<n$, $\Delta_i \entails \meta{S}_i$) \ \ então \ \ $\Delta_n \entails \meta{S}_n$' afirma precisamente a propriedade da confiabilidade que queremos demonstrar que é satisfeita por todas as regras de inferência da LVF.

A ideia é enunciar um lema para cada regra de inferência da LVF e provar que cada uma delas é confiável.
Então, mãos à obra.

\begin{factoidboxe}
	$\eand$I \ é uma regra de inferência confiável.
\end{factoidboxe}

\noindent\emph{Prova.} Considere uma aplicação qualquer de $\eand$I em uma prova qualquer da LVF.
Esta aplicação genérica pode ser representada esquematicamente como:
\begin{proof}
	\have[i]{a}{\meta{A}}
	\have[j]{b}{\meta{B}}
	\have[n]{c}{\meta{A}\eand\meta{B}} \ai{a, b}
\end{proof}\noindent
Aplicando a notação recém introduzida nesta representação, o que temos que demonstrar é:
\begin{itemize}
	\item[(*)]  Se  \ ({para todo}  $k<n$, $\Delta_k \entails \meta{S}_k$) \ \ então \ \ $\Delta_n \entails \meta{A} \eand \meta{B}$
\end{itemize}
Começamos, então, assumindo o antecedente de (*) como suposição.
\begin{itemize}
	\item[(1)] Para todo  $k<n$, $\Delta_k \entails \meta{S}_k$
\end{itemize}
Pelo esquema da regra apresentado acima e por (1) é claro que
\begin{itemize}
	\item[(2)] $\Delta_i \entails \meta{A}$
\end{itemize}
Além disso, o esquema da regra também nos ajuda ver que
\begin{itemize}
	\item[(3)] todas as sentenças de $\Delta_i$ estão também em $\Delta_n$.\footnote{
		$\Delta_i$ só poderia ter alguma sentença ausente em $\Delta_n$ se a linha $i$ estivesse em uma subprova finalizada em linha anterior à linha $n$. Mas se este fosse o caso, nós não poderíamos usar a linha $i$ na aplicação da regra $\eand$I.}
\end{itemize}
Então, de (2) e (3) podemos afirmar que
\begin{itemize}
	\item[(4)] $\Delta_n \entails \meta{A}$
\end{itemize}
Um raciocínio exatamente análogo garante que
\begin{itemize}
	\item[(5)]  $\Delta_n \entails \meta{B}$
\end{itemize}
Mas de (4) e (5) podemos concluir que
\begin{itemize}
	\item[(6)]  $\Delta_n \entails \meta{A} \eand \meta{B}$ \footnote{
		Para entender melhor este passo da prova considere $v$ uma valoração qualquer que faz todas as sentenças de $\Delta_n$ verdadeiras.
		Como $\Delta_n \entails \meta{A}$ e $\Delta_n \entails \meta{B}$, então $v$ também faz $\meta{A}$ e $\meta{B}$ verdadeiras.
		Logo, é claro que $v$ faz $\meta{A} \eand \meta{B}$ verdadeira.
		Ou seja, qualquer valoração que faz todas as sentenças de  $\Delta_n$ verdadeiras também faz $\meta{A} \eand \meta{B}$ verdadeira.
		Portanto $\Delta_n \entails \meta{A} \eand \meta{B}$.}
\end{itemize}
Veja que nós assumimos (1), o antecedente de (*), como suposição e obtivemos (6), o consequente de (*). Isso prova (*) e finaliza a demonstração do Lema.$\blacklozenge$

Todos os lemas restantes, que estabelecem a confiabilidade das demais regras da LVF terão, essencialmente, a mesma estrutura que este.

\begin{factoidboxe}
	$\eand$E \ é uma regra de inferência confiável.
\end{factoidboxe}

\noindent\emph{Prova.}
Uma aplicação genérica da regra $\eand$E pode ser representada esquematicamente por:
	\begin{proof}
		\have[i]{ab}{\meta{A}\eand\meta{B}}
		\have[n]{a}{\meta{A}} \ae{ab}
	\end{proof}\noindent
(alternativamente poderíamos ter $\meta{B}$ na linha $n$; e um raciocínio semelhante ao que faremos aqui se aplicaria neste caso)
Analogamente à prova do lema anterior, o que temos que demonstrar é:
\begin{itemize}
	\item[(*)]  Se  \ ({para todo}  $k<n$, $\Delta_k \entails \meta{S}_k$) \ \ então \ \ $\Delta_n \entails \meta{A}$
\end{itemize}
Aqui também assumimos como suposição o antecedente de (*)
\begin{itemize}
	\item[(1)] Para todo  $k<n$, $\Delta_k \entails \meta{S}_k$
\end{itemize}
De (1) é claro que $\Delta_i \entails \meta{A} \eand \meta{B}$ e, como aqui também não pode haver qualquer sentença em $\Delta_i$ que não esteja também em $\Delta_n$, temos que
\begin{itemize}
	\item[(2)] $\Delta_n \entails \meta{A} \eand \meta{B}$
\end{itemize}
E (2) nos assegura que $\Delta_n \entails \meta{A}$, que é o consequente de (*), o que finaliza a prova do lema.$\blacklozenge$

\begin{factoidboxe}
	$\eor$I \ é uma regra de inferência confiável.
\end{factoidboxe}

Deixamos esta prova como um exercício.
Ela é análoga aos lemas anteriores.

\begin{factoidboxe}
	$\eor$E \ é uma regra de inferência confiável.
\end{factoidboxe}
\noindent\emph{Prova.}
Uma aplicação genérica da regra$\eor$E pode ser representada esquematicamente por:
   \begin{proof}
	   \have[m]{aob}{\meta{A}\eor\meta{B}}
	   \open
		   \hypo[i]{a}{\meta{A}} %\by{want \meta{C}}{}
		   \have[j]{c1}{\meta{C}}
	   \close
	   \open
		   \hypo[k]{b}{\meta{B}} %\by{want \meta{C}}{}
		   \have[l]{c2}{\meta{C}}
	   \close
	   \have[n]{ab}{\meta{C}}\oe{aob, a-c1,b-c2}
   \end{proof}\noindent
Novamente, dada nossa notação, o que temos que demonstrar neste caso é:   
	\begin{itemize}
		\item[(*)]  Se  \ ({para todo}  $h<n$, $\Delta_k \entails \meta{S}_h$) \ \ então \ \ $\Delta_n \entails \meta{C}$
	\end{itemize}   
De novo, assumimos como suposição o antecedente de (*):
	\begin{itemize}
		\item[(1)] Para todo  $h<n$, $\Delta_h \entails \meta{S}_h$
	\end{itemize}
O mesmo raciocínio feito nos lemas anteriores nos assegura que não há sentença em $\Delta_m$ que não esteja também em $\Delta_n$.
Portanto, como, por (1), $\Delta_m \entails \meta{A} \eor \meta{B}$, então
	\begin{itemize}
		\item[(2)] $\Delta_n \entails \meta{A} \eor \meta{B}$
	\end{itemize}
Mas se, conforme (2), qualquer valoração que faz todas as sentenças de $\Delta_{n}$ verdadeiras, faz também $\meta{A} \eor \meta{B}$ verdadeira, então as propriedades da tabela de verdade da disjunção asseguram que qualquer valoração que faz todas as sentenças de  $\Delta_{n}$ verdadeiras faz $\meta{A}$ verdadeira ou faz $\meta{B}$ verdadeira. Ou seja, de (2) temos que:
	\begin{itemize}
		\item[(3)] $\Delta_n \entails \meta{A}$ \ \ \ ou \ \ \ $\Delta_n \entails \meta{B}$
	\end{itemize}
Vamos analisar estas duas alternativas:
   \begin{ebullet}
	   \item[\emph{Caso 1: \ \ $\Delta_n \entails \meta{A}$}].
	   		\\Repare que, por (1),
	   		\begin{itemize}
	   			\item[(4)] $\Delta_j \entails \meta{C}$
	   		\end{itemize}
	   		Repare também, através do esquema da regra representado acima, que a única sentença em $\Delta_{j}$ que pode não estar em $\Delta_{n}$ é $\meta{A}$. Então, de (4) temos:
	   		\begin{itemize}
				\item[(5)] $\Delta_n, \meta{A} \entails \meta{C}$
			\end{itemize} 
			Mas a hipótese deste caso é que $\Delta_n \entails \meta{A}$. Então de (5) e desta hipótese temos:
			\begin{itemize}
				\item[(6)] $\Delta_n \entails \meta{C}$
			\end{itemize}
	   \item[\emph{Caso 2: \ \ $\Delta_n \entails \meta{B}$}].
	   		\\Raciocinando exatamente como no caso 1, considerando agora que $\Delta_l \entails \meta{C}$, também concluímos que
		   \begin{itemize}
	   			\item[(7)] $\Delta_n \entails \meta{C}$
	   		\end{itemize}
	\end{ebullet}
Assim, como (3) nos assegura que $\Delta_n \entails \meta{A}$ ou $\Delta_n \entails \meta{B}$ e como vimos que em ambas essas alternativas $\Delta_n \entails \meta{C}$, então concluímos incondicionalmente que $\Delta_n \entails \meta{C}$, o que, de acordo com (*), finaliza a prova do lema.$\blacklozenge$

\begin{factoidboxe}
	$\enot$E \ é uma regra de inferência confiável.
\end{factoidboxe}
\noindent\emph{Prova.}
Uma aplicação genérica da regra $\enot$E pode ser representada esquematicamente por:
\begin{proof}
   \have[i]{i}{\meta{A}} 
   \have[j]{j}{\enot\meta{A}}
   \have[n]{nb}{\ered}\ri{i, j}
\end{proof}\noindent
Aqui o que temos que demonstrar é:
\begin{itemize}
	\item[(*)]  Se  \ ({para todo}  $k<n$, $\Delta_k \entails \meta{S}_k$) \ \ então \ \ $\Delta_n \entails \ered$
\end{itemize}
Iniciamos, novamente, assumindo o antecedente de (*) como suposição:
\begin{itemize}
	\item[(1)] Para todo  $k<n$, $\Delta_k \entails \meta{S}_k$
\end{itemize}
Como toda sentença de $\Delta_i$ é sentença de $\Delta_n$ e, por (1), $\Delta_i \entails \meta{A}$, então:
\begin{itemize}
	\item[(2)] $\Delta_n \entails \meta{A}$
\end{itemize}
Um raciocínio análogo garante que:
\begin{itemize}
	\item[(3)]  $\Delta_n \entails \enot\meta{A}$
\end{itemize}
De (2) e (3) podemos concluir que:
\begin{itemize}
	\item[(4)]  $\Delta_n \entails \meta{A} \eand \enot\meta{A}$ 
\end{itemize}
Mas lembre-se que a notação $\Delta_n \entails \meta{A} \eand \enot\meta{A}$ significa que toda valoração que faz verdadeiras todas as sentenças de $\Delta_n$ também faz $\meta{A} \eand \enot\meta{A}$ verdadeira.
Só que nós sabemos que $\meta{A} \eand \enot\meta{A}$ é uma contradição, ou seja, nenhuma valoração a faz verdadeira. Então, de (4) e do fato de que nenhuma valoração faz $\meta{A} \eand \enot\meta{A}$ verdadeira, concluímos que:
\begin{itemize}
	\item[(5)] não há qualquer valoração que faz todas as sentenças de  $\Delta_n$ verdadeiras.\footnote{
		Repare que o raciocínio (a inferência) que fizemos na passagem de (4) para (5) é a \textit{contraposição}, ou \textit{negação do consequente}: `$P \eif Q, \enot Q \entails \enot P$'.
		Veja que uma consequência da afirmação (4) é que se $v$ é uma valoração na qual todas as sentenças de $\Delta_n$ são verdadeiras, então  $\meta{A} \eand \enot\meta{A}$ também é verdadeira em $v$ ($P \eif Q$).
		Mas nós sabemos que $\meta{A} \eand \enot\meta{A}$ não é verdadeira em nenhuma valoração ($\enot Q$).
		Então concluímos que não pode haver nenhuma valoração $v$ na qual todas as sentenças de $\Delta_n$ são verdadeiras ($\enot Q$).}
\end{itemize}
Mas então, (5) nos autoriza a concluir a seguinte estranha afirmação:
\begin{itemize}
	\item[(6)]  toda valoração que faz todas as sentenças de $\Delta_n$ verdadeiras também faz $\ered$ verdadeira.
\end{itemize}
A afirmação (6) é mesmo bem suspeita.
Não só porque acabamos de dizer, em (5), que nenhuma valoração faz todas as sentenças de $\Delta_n$ verdadeiras, mas também porque sabemos que  `$\ered$' não é verdadeiro em nenhuma valoração; o que deixa esta passagem de (5) para (6) pelo menos duvidosa.
Nós vamos refletir um pouco sobre isso, mas antes vamos apenas notar que, reescrita através de nossa notação, a afirmação (6) diz que $\Delta_n \entails \ered$, e isso, de acordo com (*), admitindo que não cometemos nenhum erro, finaliza a prova do lema.$\blacklozenge$


\subsection{Um rápido desvio: sentenças vacuamente verdadeiras}

Antes de prosseguir com os lemas que faltam, vamos nos deter brevemente sobre a passagem crucial da prova anterior, de (5) para (6), e certificarmo-nos de que não cometemos nenhum erro ali. 

Pense um pouco sobre a afirmação (6).
Em que condições (6) seria uma afirmação falsa?
%Qual seria um contraexemplo para (6)?
%Que situação comprovaria a falsidade de (6)?
Veja bem, como (6) está dizendo que toda valoração que faz todas as sentenças de $\Delta_n$ verdadeiras também faz $\ered$ verdadeira, as únicas situações que comprovariam a falsidade de (6) ocorrem quando temos uma valoração $v$ na qual
\begin{itemize}
	\item[\textit{a})] todas as sentenças de $\Delta_n$ são verdadeiras, 
	\item[\textit{b})] mas $\ered$ é falsa.
\end{itemize}
Mas note que (5) afirma que nenhuma valoração faz todas as sentenças de $\Delta_n$ verdadeiras.
Ou seja, (5) está dizendo que a condição (\textit{a}) exigida para qualquer contraexemplo de (6) é impossível. Nunca ocorre.
Então (5) garante que (6) não tem contraexemplo:
(6) não será falsa em nenhuma situação que respeite o que (5) diz.
É isso que nos autoriza concluir (6) a partir de (5) e ter confiança de que não cometemos nenhum erro.

A estranheza desta passagem se dá porque, apesar de aceitarmos (6) como verdadeira, a propriedade que (6) expressa sobre as valorações não é instanciada por nenhuma valoração, quando (5) é mesmo verdadeira. Nenhuma valoração satisfaz as condições de aplicabilidade de (6). Ela é verdadeira apenas porque não tem contraexemplo que a falsifique.

O caso da afirmação (6) é similar, por exemplo, ao da seguinte afirmação:
\begin{itemize}
	\item[(7)] Todas as pessoas com mais de 400 anos têm três pés.
\end{itemize}

A propriedade sobre as pessoas que a afirmação (7) expressa não é instanciada por ninguém. Nenhuma pessoa satisfaz a condição de aplicabilidade da propriedade (7), já que ninguém tem mais de 400 anos.
Mas note que ao não ser instanciada, (7) não tem contraexemplo.
Um contraexemplo para (7) seria dado por uma pessoa que tivesse mais de 400 anos e não tivesse três pés.
Como ninguém tem mais de 400 anos, (7) não tem contraexemplo.

A convenção clássica estabelecida é considerar \textit{vacuamente verdadeiras} sentenças como (6) e (7) que não são instanciáveis.
São classificadas como \textit{verdadeiras} porque não têm contraexemplo, mas são rotuladas de \textit{vacuamente} verdadeiras porque não têm instâncias.
Tratamos rapidamente deste assunto no âmbito da LPO na Seção 15.2.


\subsection{De volta à confiabilidade das regras de inferência}

Pronto. Depois deste breve desvio, voltemos aos nossos lemas sobre a confiabilidade das regras de inferência.

%\footnote{
%	Este tipo de situação, quando um determinado item (no caso, a regra $\enot$E) não consegue violar uma certa propriedade (no caso a confiabilidade) apenas porque as condições para que a propriedade seja satisfeita ou violada são impossíveis (no caso a inocência de todas as linhas anteriores à aplicação da regra $\enot$E), é chamado de \emph{vacuidade}. Nós dizemos que a regra $\enot$E é confiável não porque ela sempre produz uma linha inocente quando todas as linhas anteriores à sua aplicação são inocentes. Nós dizemos que a regra $\enot$E é confiável porque sempre que há ocasião para a sua aplicação, não pode ser que todas as linhas anteriores sejam inocentes. Então a regra $\enot$E é um caso a parte. Ela nunca confirma a confiabilidade, mas também nunca a viola. Quando isso ocorre, a convenção \emph{clássica} estabelecida é considerar que o item (neste caso a regra $\enot$E) \textit{satisfaz vacuamente} a propriedade (neste caso a confiabilidade).}

\begin{factoidboxe}
	X \ é uma regra de inferência confiável.
\end{factoidboxe}

Também deixamos esta prova como um exercício.

\begin{factoidboxe}
	$\enot$I \ é uma regra de inferência confiável.
\end{factoidboxe}
\noindent\emph{Prova.}
	Uma aplicação genérica da regra $\enot$I pode ser representada esquematicamente por:
\begin{proof}
   \open
	   \hypo[i]{a}{\meta{A}}
	   \have[j]{b}{\ered}
   \close
   \have[n]{na}{\enot\meta{A}}\ni{a-b}
\end{proof}\noindent
O que temos que demonstrar é:
\begin{itemize}
	\item[(*)]  Se  \ ({para todo}  $k<n$, $\Delta_k \entails \meta{S}_k$) \ \ então \ \ $\Delta_n \entails \enot\meta{A}$
\end{itemize}
Iniciamos, novamente, assumindo o antecedente de (*) como suposição:
\begin{itemize}
	\item[(1)] Para todo  $k<n$, $\Delta_k \entails \meta{S}_k$
\end{itemize}
Por (1) é claro que
\begin{itemize}
	\item[(2)] $\Delta_j \entails \ered$ \ \ e
\end{itemize}
\begin{itemize}
	\item[(3)] $\Delta_i \entails \meta{A}$
\end{itemize}
Note, através do esquema da regra representado acima, que $\Delta_j=\Delta_i$, portanto, por (2),
\begin{itemize}
	\item[(4)] $\Delta_i \entails \ered$
\end{itemize}
O esquema geral da regra também nos mostra que
\begin{itemize}
 	\item[(5)] toda sentença em $\Delta_i$ está entre as sentenças de $\Delta_n$, com a possível exceção de $\meta{A}$.
\end{itemize}
De (4) e (5) temos que:
\begin{itemize}
	\item[(6)] $\Delta_n, \meta{A} \entails \ered$
\end{itemize}
Então, pelo mesmo raciocínio de contraposição usado no Lema da regra $\enot$E, de (6) nós podemos inferir que
\begin{itemize}
	\item[(7)] nenhuma valoração faz todas as sentenças de $\Delta_n$ e $\meta{A}$ verdadeiras.
\end{itemize}
Ou seja, de acordo com (7), $\meta{A}$ tem que ser falsa em qualquer valoração onde todas as sentenças de $\Delta_n$ são verdadeiras. Então, 
\begin{itemize}
	\item[(8)] toda valoração que faz todas as sentenças de $\Delta_n$ verdadeiras também faz $\enot\meta{A}$ verdadeira.
\end{itemize}
Reescrita segundo nossa notação, (8) diz que $\Delta_n \entails \enot\meta{A}$; e isso, de acordo com (*), finaliza a prova o lema.$\blacklozenge$

%Há duas opções para $\Delta_n$:
%\begin{itemize}
%	\item ou \ \ $\Delta_n \entails \meta{A}$
%	\item ou \ \ $\Delta_n \nvDash \meta{A}$ \ e, \ portanto, \  $\Delta_n \entails \enot\meta{A}$
%\end{itemize}
%Se $\Delta_n \entails \enot\meta{A}$, então o lema já está demonstrado.
%
%\noindent Se, por outro lado, $\Delta_n \entails \meta{A}$, então, por (6):
%\begin{itemize}
%	\item[(7)] $\Delta_n \entails \ered$
%\end{itemize}
%Mas como $\ered$ não é verdadeiro em nenhuma valoração, então (7) implica (por contraposição) que 
%\begin{itemize}
%	\item[(8)] nenhuma valoração faz todas as sentenças de $\Delta_n$ verdadeiras. 
%\end{itemize}
%E se aplicamos a (8) o mesmo raciocínio por vacuidade que usamos no caso da regra $\enot$E, obtemos $\Delta_n \entails \enot\meta{A}$ e o lema também fica demonstrado.$\blacklozenge$

\begin{factoidboxe}\label{lem:LastRuleSound} IP, \ $\eif$I, \ $\eif$E, \ $\eiff$I \ e \ $\eiff$E \ são todas regras confiáveis.
\end{factoidboxe}

Como estes casos não trazem novidade aos já apresentados, também os deixamos como exercícios.

Até aqui já demonstramos que todas as regras básicas do sistema formal de provas da LVF são confiáveis.
Vamos agora demonstrar que qualquer regra derivada também é confiável.

\begin{factoidboxe}
	Todas as regras derivadas de nosso sistema formal para a LVF são confiáveis.
\end{factoidboxe}
\noindent\emph{Prova.}
	Suponha que tenhamos usado uma regra derivada para obter alguma sentença, $\meta{A}$, na linha $n$ de alguma prova da LVF, e que todas as linhas anteriores da prova são inocentes.
	Mas qualquer uso de uma regra derivada é, na verdade, uma abreviação de vários usos das regras básicas de inferência.
	Ou seja, poderíamos ter usado apenas as regras básicas para obter a sentença $\meta{A}$ em alguma linha $n+k$, sem a introdução de quaisquer outras suposições.
	Portanto, aplicando várias vezes (exatamente $k+1$ vezes) os resultados já demonstrados de que todas as regras básicas são confiáveis, concluímos que a linha $n+k$ é inocente. Consequentemente, a regra derivada é confiável.$\blacklozenge$

É isso! Provamos que todas as regras (básicas ou não) são confiáveis, e assim completamos a prova do Lema da Inocência e finalizamos a demonstração do Teorema da Correção.


\subsection{O fim e o começo...}
Demonstramos que o sistema formal de provas da LVF que aprendemos neste livro é Correto. Isto significa que qualquer prova formal que fizermos nesse sistema será a prova de um argumento válido de acordo com a semântica das tabelas de verdade.
O nosso sistema de provas é correto; ele jamais produzirá a prova de um argumento que não seja válido.

E como fizemos a demonstração disso? Bem, lembre que uma prova formal é apenas uma sequência (de comprimento arbitrário) de aplicações de regras.
Mostramos que nenhuma aplicação individual de qualquer regra nos levará ao erro. Segue-se (por indução) que nenhuma prova formal (sequência finita de aplicações de regras) nos levará ao erro. Ou seja: nosso sistema de provas é correto.

Fazer isso deu um pouco de trabalho.
Tivemos que introduzir notações, definições, propor e demonstrar lemas e organizar tudo de um modo bastante detalhado, o que consumiu umas boas páginas deste texto e exigiu alguns de seus neurônios para acompanhar tudo.
Mas a ideia geral da Correção de um sistema formal é simples e, no caso da LVF, além de simples ela, desde o princípio, pareceu plausível, quase óbvia.
Este é um excelente exemplo do tipo de desafio geral que a lógica coloca a quem se atreve a estudá-la e, por isso, é um ótimo ponto para finalizar este livro.
O livro termina aqui, mas a lógica não termina com ele. Ela está apenas começando. Esperamos por você nas nossas próximas aventuras. 



\practiceproblems

\problempart
\label{pr.Soundness}
Complete os Lemas deste capítulo que foram deixados como exercícios.
Ou seja, mostre que as seguintes regras são confiáveis:
	\begin{earg}
		\item $\eor$I. (\emph{Dica}: este é um caso similar ao da regra $\eand$E.)
		\item X. (\emph{Dica}: este é um caso similar ao da regra $\enot$E.)
		\item $\eif$I. (\emph{Dica}: este é um caso similar ao da regra $\eor$E.)
		\item $\eif$E.
		\item IP. (\emph{Dica}: este é um caso similar ao da regra $\enot$I.)
	\end{earg}

